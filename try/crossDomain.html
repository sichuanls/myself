<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>模拟跨域</title>
</head>
<body>
<!-- <iframe src="http://baidu.com"></iframe> -->
<script>
    // window.frames[0].onload = function () {
    //     alert("1");
    // }
function count(start, end) {
    console.log(start);
    var temp=start;
    var han=function(){
        temp++;
        if(temp<=end) console.log(temp);
        else clearInterval(internal);
    };
    var internal=setInterval(han, 100);
	return {
        cancel:function(){
            clearInterval(internal);
        }
    };
}
// function count (start, end) {
//     var timer = null;
//     console.log(start);
//     timer = setInterval(function () {
//         if(start< end){
//             console.log(++start);
//         }
//     },100);
//     return {
//         cancel: function  () {
//             clearInterval(timer);
//         }
//     }
// }
count(0,50);

function getUrlParam(sUrl, sKey) {
    var url=sUrl;
    var search=url.slice(url.indexOf('?')+1, url.indexOf('#'));
    var re=[],obj={},count=0,arr=[];
    if(search){
        re=search.split('&');
        for(var i=0;i<re.length;i++){
            var temp=re[i].split('=');
            if(temp[0]==sKey){
				arr.push(temp[1]);
            }
            else{
               if(!obj[temp[0]]) obj[temp[0]]=temp[1];
                else obj[temp[0]] = [].concat(obj[temp[0]],temp[1]);
            } 
        }
    }
    if(!sKey)return obj;
    if(arr.length==0) return '';
    if(arr.length==1) return arr[0];
    if(arr.length>1) return arr;
    
}

function getUrlParam(sUrl, sKey) {
    var a = document.createElement("a");
    a.href = sUrl;
    var query = a.search.length > 0 ? a.search.substring(1) : "";
    var arr = query.length > 0 ? query.split("&") : [];
    var obj={},item,name,value;
    for(var i=0;i<arr.length;i++){
        item = arr[i].split("=");
        name = item[0];
        value = item[1];
        if(name in obj){
            obj[name] = [].concat(obj[name],value);
        }else obj[name] = value;
    }
    if(sKey){
        if(sKey in obj){
            return obj[sKey];
        }else return "";
    }else return obj;
}

//斐波那契数列函数
function fibonacci(n) {
    if(n==1) return 1;
    if(n==2) return 1;
    var pre=1,next=1,re;
    for(var i=0;i<n-2;i++){
        re=pre+next;
        pre=next;
        next=re;
    }
    return re;
}

//按格式输出时间
function formatDate(t,str){
  var obj = {
    yyyy:t.getFullYear(),
    yy:(""+ t.getFullYear()).slice(-2),
    M:t.getMonth()+1,
    MM:("0"+ (t.getMonth()+1)).slice(-2),
    d:t.getDate(),
    dd:("0" + t.getDate()).slice(-2),
    H:t.getHours(),
    HH:("0" + t.getHours()).slice(-2),
    h:t.getHours() % 12,
    hh:("0"+t.getHours() % 12).slice(-2),
    m:t.getMinutes(),
    mm:("0" + t.getMinutes()).slice(-2),
    s:t.getSeconds(),
    ss:("0" + t.getSeconds()).slice(-2),
    w:['日', '一', '二', '三', '四', '五', '六'][t.getDay()]
  };
  return str.replace(/([a-z]+)/ig,function($1){return obj[$1]});
}
formatDate(new Date(1409894060000), 'yyyy-MM-dd HH:mm:ss 星期w');

//常见正则表达式
//美元USD
/^\$([1-9](\d{0,2})(\d{3})*|0)(/.d{2})?$/
//邮箱Email：/^(\w)+(\.\w+)*@(\w)+((\.\w+)+)$/
//身份证 ^d{15}|d{18}$
//电话号码
//12个月 /^(0?[1-9]|1[0-2])$/   注意括号
//31天：/^((0?[1-9])|((1|2)[0-9])|30|31)$/
//URL： 超麻烦

//查找两个节点的最近的一个共同父节点
function commonParentNode(oNode1, oNode2) {
for(;oNode1;oNode1=oNode1.parentNode){
if(oNode1.contains(oNode2)) return oNode1;
}
}

//将字符串转换为驼峰格式
function cssStyle2DomStyle(sName) {
return sName.replace(/\-[a-z]/g , function(a, b){
 
    return b == 0 ? a.replace('-','') : a.replace('-','').toUpperCase();
 
});
}
love hate
link visited hover active
</script>
</body>
</html>